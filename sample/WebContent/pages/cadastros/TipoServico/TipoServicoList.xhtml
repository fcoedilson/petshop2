<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:t="http://myfaces.apache.org/tomahawk">

	<div id="cadastro1">

		<fieldset>

			<rich:tabPanel switchType="client">
	
				<rich:tab label="Serviços">

					<h:outputLabel value="Busca"/>
					<h:inputText value="#{tipoServicoBean.filter}"></h:inputText>
					<a4j:commandButton value="Pesquisar" action="#{tipoServicoBean.search}" styleClass="button" reRender="dataTable"/>
					<a4j:commandButton value="Novo" action="#{tipoServicoBean.prepareSave}" styleClass="button" reRender="paginaPrincipal"/>

			      	<rich:dataTable id="dataTable" value="#{tipoServicoBean.entities}" var="tipoServico" width="100%" rows="50" rowKeyVar="index" 
			      		rowClasses="even,odd" 
			      		onRowMouseOver="jQuery(this).addClass('trHover')"
						onRowMouseOut="jQuery(this).removeClass('trHover')">
		
			      		<c:if test="#{tipoServicoBean.entitiesSize == 0}">
							<rich:column>
								<f:facet name="header">Nenhum registro foi encontrado.</f:facet>
							</rich:column>
						</c:if>
		
			      		<c:if test="#{tipoServicoBean.entitiesSize > 0}" >
		
							<rich:column width="2%" style="text-align: center;" > 
								<f:facet name="header"><h:outputText value="Nº" /></f:facet>
								<h:outputText value="#{index+1}" style="color: black;"/>
							</rich:column>
		
							<rich:column width="70%" style="text-align: left;" > 
								<f:facet name="header"><h:outputText value="Descrição" /></f:facet>
								<h:outputText value="#{tipoServico.descricao}" style="color: black;"/>
							</rich:column>
		
							<rich:column width="2%" style="text-align: center;" rendered="#{controlBean.adminSistema || controlBean.adminCliente}">
								<f:facet name="header"><h:outputText value="Editar" /></f:facet>
								<h:commandLink styleClass="editar" action="#{tipoServicoBean.prepareUpdate}" value="Editar">
									<f:setPropertyActionListener target="#{tipoServicoBean.entity}" value="#{tipoServico}"/>
									<a4j:support event="onclick" reRender="paginaPrincipal"/>
								</h:commandLink>
							</rich:column>
		
							<rich:column width="2%" style="text-align: center;" rendered="#{controlBean.adminCliente  || controlBean.adminCliente}">
								<f:facet name="header"><h:outputText value="Excluir" /></f:facet>
								<h:commandLink styleClass="excluir"  action="#{tipoServicoBean.delete}" value="Excluir" onclick="if(!confirm('Tem certeza que deseja excluir?')) { form.reset();return false;}">
									<f:setPropertyActionListener target="#{tipoServicoBean.entity}" value="#{tipoServico}"/>
									<a4j:support event="oncomplete" reRender="paginaPrincipal"/>
								</h:commandLink>
							</rich:column>
							<f:facet name="footer">
								<rich:datascroller renderIfSinglePage="false" for="dataTable"/>
		           	 		</f:facet>
						</c:if>
		
					</rich:dataTable>

				</rich:tab>

			</rich:tabPanel>

		</fieldset>

	</div>


</ui:composition>